<!-- Popup container-->
<div class="main-popup__container" (keydown)="onKeyDown($event)">
  <ng-container *ngIf="currentMode == Modes.Edit; then editForm; else formsTable"></ng-container>
  <div class="status-text">{{ statusText }}</div>
</div>

<!--Main form snapshots table-->
<ng-template #formsTable>
  <div class="forms-table__container">
    <table class="forms-table">
      <thead>
        <tr>
          <th></th>
          <th>Fill Name</th>
          <th>Hotkey</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngIf="dataSource && dataSource.length > 0; then formsRows; else emptyRow"></ng-container>
        <ng-template #formsRows>
          <ng-container *ngFor="let row of dataSource">
            <tr>
              <td>
                <img src="assets/arrow-up-solid.svg" (click)="loadFormSnapshot(row)" />
              </td>
              <td>
                {{ row.fillName }}
                <input *ngIf="isEditMode" [value]="row.fillName" />
              </td>
              <td>{{ row.hotkey }}</td>
              <td>
                <img src="assets/file-export-solid.svg" (click)="editFormSnapshot(row)" />
                <img src="assets/trash-alt-regular.svg" (click)="deleteFormSnapshot(row)" />
              </td>
            </tr>
          </ng-container>
        </ng-template>
        <ng-template #emptyRow>
          <tr>
            <td>No results found!</td>
          </tr>
        </ng-template>
      </tbody>
    </table>
  </div>
  <div class="d-flex justify-content-center control-panel__container">
    <input type="text" [(ngModel)]="newFillName" placeholder="Enter name here" />
    <button (click)="saveFill()" class="btn btn-outline-success ml-2">Save!</button>
    <button (click)="clearStorage()" class="clearStorageBtn btn btn-outline-danger">
      Clear Storage
    </button>
  </div>
</ng-template>

<!--Form snapshot edit-->
<ng-template #editForm>
  <app-edit-form [snapshot]="this.currentSnapshot"></app-edit-form>
  <!-- <div [hidden]="!editError" class="c-edit-form__error">Invalid input</div> -->
  <div class="d-flex m-2 justify-content-center ">
    <button class="btn btn-secondary m-2" (click)="updateFormSnapShot()">Save</button>
    <button class="btn btn-outline-danger m-2" (click)="switchMode(Modes.List)">Cancel</button>
  </div>
</ng-template>

<!-- <div>
  The current URL is: <span id="urlSpan">{{ this.currentUrl }}</span>
</div>
<button (click)="onClick()">Click me to test</button>
<div class="c-debug__output-container">
  <div><strong>Current output:</strong></div>
  <div *ngIf="currentFormSnapshot">{{ currentFormSnapshot }}</div>
</div> -->
